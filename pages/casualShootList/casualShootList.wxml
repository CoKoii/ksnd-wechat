<view class="casual-shoot-list-page">
  <view class="tabs">
    <view
      class="tab-item {{activeTab === index ? 'active' : ''}}"
      wx:for="{{tabs}}"
      wx:key="index"
      data-index="{{index}}"
      bindtap="onTabChange">
      {{item}}
    </view>
  </view>

  <view class="search-bar">
    <input
      class="search-input"
      value="{{searchValue}}"
      placeholder="搜索描述"
      placeholder-class="search-placeholder"
      confirm-type="search"
      bindinput="onSearchInput"
      bindconfirm="onSearchConfirm" />
    <view class="search-action" bindtap="onSearchTap">搜索</view>
    <view class="search-reset" wx:if="{{keyword}}" bindtap="onSearchReset">重置</view>
  </view>

  <scroll-view class="scroll-container" scroll-y>
    <view class="record-list">
      <view
        class="record-item"
        wx:for="{{list}}"
        wx:for-index="recordIndex"
        wx:key="id"
        data-id="{{item.id}}"
        bindtap="goToDetail">
        <view class="record-header">
          <text class="record-title">{{item.firstDescription}}</text>
          <view class="state-tag {{item.stateClass}}">{{item.stateText}}</view>
        </view>

        <view class="record-date {{item.previewImages.length > 0 ? 'has-images' : ''}}">更新：{{item.updatedAtText}}</view>
        <view class="record-images" wx:if="{{item.previewImages.length > 0}}">
          <image
            class="record-image"
            wx:for="{{item.previewImages}}"
            wx:key="index"
            wx:for-index="imageIndex"
            wx:for-item="img"
            data-record-index="{{recordIndex}}"
            data-image-index="{{imageIndex}}"
            catchtap="onPreviewRecordImage"
            src="{{img.url}}"
            mode="aspectFill" />
        </view>
      </view>
    </view>

    <view class="loading-more" wx:if="{{loading}}">
      <text>加载中...</text>
    </view>
    <view class="empty" wx:if="{{!loading && list.length === 0}}">
      <text>暂无随手拍记录</text>
    </view>
  </scroll-view>

  <button class="fab-add" bindtap="goToCreate">+ 新增</button>
</view>
