<!--pages/todoList/todoList.wxml-->
<view class="todo-list-page">
  <!-- Tab切换栏 -->
  <view class="tabs">
    <view 
      class="tab-item {{activeTab === index ? 'active' : ''}}" 
      wx:for="{{tabs}}" 
      wx:key="index"
      data-index="{{index}}"
      bindtap="onTabChange"
    >
      {{item}}
    </view>
  </view>

  <view class="search-bar">
    <input
      class="search-input"
      value="{{searchValue}}"
      placeholder="请输入商铺名称"
      placeholder-class="search-placeholder"
      confirm-type="search"
      bindinput="onSearchInput"
      bindconfirm="onSearchConfirm"
    />
    <view class="search-action" bindtap="onSearchTap">搜索</view>
    <view class="search-reset" wx:if="{{keyword}}" bindtap="onSearchReset">重置</view>
  </view>

  <!-- 待办列表 -->
  <scroll-view 
    class="scroll-container" 
    scroll-y 
    bindscrolltolower="onReachBottom"
    lower-threshold="100"
  >
    <view class="todo-items">
      <view class="todo-item" wx:for="{{todoList}}" wx:key="id" data-id="{{item.id}}" bindtap="goToDetail">
        <view class="item-header">
          <text class="title">{{item.name || '--'}}</text>
        </view>
        
        <view class="item-body">
          <view class="shop-row">
            <text class="shop-label">商铺</text>
            <text class="shop-value">{{item.coname || '--'}}</text>
          </view>
        </view>
        
        <view class="item-footer">
          <text class="footer-label">发布时间</text>
          <text class="publish-time">{{item.publishDate || '--'}}</text>
        </view>
      </view>
    </view>

    <!-- 加载状态 -->
    <view class="loading-more" wx:if="{{loading}}">
      <text>加载中...</text>
    </view>
    <view class="no-more" wx:if="{{!hasMore && todoList.length > 0}}">
      <text>没有更多了</text>
    </view>
    <view class="empty" wx:if="{{!loading && todoList.length === 0}}">
      <text>暂无数据</text>
    </view>
  </scroll-view>
</view>
